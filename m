Return-Path: <linux-i2c-owner@vger.kernel.org>
X-Original-To: lists+linux-i2c@lfdr.de
Delivered-To: lists+linux-i2c@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 2A63E5DE01
	for <lists+linux-i2c@lfdr.de>; Wed,  3 Jul 2019 08:24:54 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726236AbfGCGYx (ORCPT <rfc822;lists+linux-i2c@lfdr.de>);
        Wed, 3 Jul 2019 02:24:53 -0400
Received: from mail0.scram.de ([78.47.204.202]:49575 "EHLO mail.scram.de"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1725927AbfGCGYx (ORCPT <rfc822;linux-i2c@vger.kernel.org>);
        Wed, 3 Jul 2019 02:24:53 -0400
Received: from localhost (mail0.scram.de [78.47.204.202])
        by localhost (Postfix) with ESMTP id 61C79551A6;
        Wed,  3 Jul 2019 08:24:51 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at scram.de
X-Spam-Flag: NO
X-Spam-Score: -2.255
X-Spam-Level: 
X-Spam-Status: No, score=-2.255 required=5 tests=[AWL=0.345, BAYES_00=-2.599,
        NO_RELAYS=-0.001]
Received: from mail.scram.de ([78.47.204.202])
        by localhost (mail.scram.de [127.0.0.1]) (amavisd-new, port 10024)
        with ESMTP id XSyEBiSjjdEY; Wed,  3 Jul 2019 08:24:11 +0200 (CEST)
Received: (using TLSv1 with cipher AES128-SHA (128/128 bits))
        (Client did not present a certificate)
        (Authenticated sender)
        by mail.scram.de (Postfix) with ESMTPSA id 73F9356844;
        Wed,  3 Jul 2019 08:24:11 +0200 (CEST)
Subject: Re: [PATCH] i2c: remove casting dma_alloc
To:     Vasyl Gomonovych <gomonovych@gmail.com>,
        linuxppc-dev@lists.ozlabs.org, linux-i2c@vger.kernel.org,
        linux-kernel@vger.kernel.org
References: <20190623211354.24181-1-gomonovych@gmail.com>
From:   Jochen Friedrich <jochen@scram.de>
Message-ID: <3c7e7f9e-7d64-67cc-cc42-8490d68359a6@scram.de>
Date:   Wed, 3 Jul 2019 08:24:11 +0200
User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.2
MIME-Version: 1.0
In-Reply-To: <20190623211354.24181-1-gomonovych@gmail.com>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 7bit
Sender: linux-i2c-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-i2c.vger.kernel.org>
X-Mailing-List: linux-i2c@vger.kernel.org

> From: Vasyl <gomonovych@gmail.com>
>
> Generated by:  alloc_cast.cocci
>
> Signed-off-by: Vasyl <gomonovych@gmail.com>
Acked-by: Jochen Friedrich <jochen@scram.de>
> ---
>   drivers/i2c/busses/i2c-cpm.c | 4 +++-
>   1 file changed, 3 insertions(+), 1 deletion(-)
>
> diff --git a/drivers/i2c/busses/i2c-cpm.c b/drivers/i2c/busses/i2c-cpm.c
> index 187900594e3d..1213e1932ccb 100644
> --- a/drivers/i2c/busses/i2c-cpm.c
> +++ b/drivers/i2c/busses/i2c-cpm.c
> @@ -531,7 +531,9 @@ static int cpm_i2c_setup(struct cpm_i2c *cpm)
>   		}
>   		out_be32(&rbdf[i].cbd_bufaddr, ((cpm->rxdma[i] + 1) & ~1));
>   
> -		cpm->txbuf[i] = (unsigned char *)dma_alloc_coherent(&cpm->ofdev->dev, CPM_MAX_READ + 1, &cpm->txdma[i], GFP_KERNEL);
> +		cpm->txbuf[i] = dma_alloc_coherent(&cpm->ofdev->dev,
> +						   CPM_MAX_READ + 1,
> +						   &cpm->txdma[i], GFP_KERNEL);
>   		if (!cpm->txbuf[i]) {
>   			ret = -ENOMEM;
>   			goto out_muram;
