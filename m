Return-Path: <linux-i2c-owner@vger.kernel.org>
X-Original-To: lists+linux-i2c@lfdr.de
Delivered-To: lists+linux-i2c@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id E3AAB28FF0F
	for <lists+linux-i2c@lfdr.de>; Fri, 16 Oct 2020 09:26:48 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2404509AbgJPH0s (ORCPT <rfc822;lists+linux-i2c@lfdr.de>);
        Fri, 16 Oct 2020 03:26:48 -0400
Received: from mail.vivotek.com ([60.248.39.150]:45508 "EHLO mail.vivotek.com"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S2404501AbgJPH0r (ORCPT <rfc822;linux-i2c@vger.kernel.org>);
        Fri, 16 Oct 2020 03:26:47 -0400
Received: from pps.filterd (vivotekpps.vivotek.com [127.0.0.1])
        by vivotekpps.vivotek.com (8.16.0.42/8.16.0.42) with SMTP id 09G7JUoF005316;
        Fri, 16 Oct 2020 15:26:41 +0800
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=vivotek.com; h=from : to : cc :
 subject : date : message-id : references : in-reply-to : content-type :
 content-transfer-encoding : mime-version; s=dkim;
 bh=LHCS1rPFeE0anPYP0wkEIlmhDgZaxcTvteWJ4iaVG18=;
 b=JdBPYFZafx4frqD6dnj05bpGNJHbeNSzJOXz5YuLnelgmMDM/ShwlaDrpgK0R7zwNK4H
 IBHRfrHQoLAiKbwYANOo5W/0NAdXmLZxVvO7BJLDs3n0v4Vl+60et6gvunDmtw34asJc
 UWNMJczPA6PCs2H/4j7muceRURAx7iylyno= 
Received: from cas02.vivotek.tw ([192.168.0.59])
        by vivotekpps.vivotek.com with ESMTP id 342yd1cef2-1
        (version=TLSv1.2 cipher=ECDHE-RSA-AES256-SHA384 bits=256 verify=NOT);
        Fri, 16 Oct 2020 15:26:41 +0800
Received: from MBS07.vivotek.tw ([fe80::2027:4d67:6c01:78d8]) by
 CAS02.vivotek.tw ([fe80::157e:3677:ef5b:27a2%11]) with mapi id
 14.03.0487.000; Fri, 16 Oct 2020 15:26:40 +0800
From:   <Michael.Wu@vatics.com>
To:     <jarkko.nikula@linux.intel.com>
CC:     <andriy.shevchenko@linux.intel.com>,
        <mika.westerberg@linux.intel.com>, <linux-i2c@vger.kernel.org>,
        <morgan.chang@vatics.com>, <dean.hsiao@vatics.com>,
        <paul.chen@vatics.com>
Subject: RE: Designeware I2C slave confusing IC_INTR_STOP_DET handle
Thread-Topic: Designeware I2C slave confusing IC_INTR_STOP_DET handle
Thread-Index: AdacaCEF1S068DPwQGOIeCihPcVtGv///2uA//G4NVA=
Date:   Fri, 16 Oct 2020 07:26:39 +0000
Message-ID: <5DB475451BAA174CB158B5E897FC1525B12944EA@MBS07.vivotek.tw>
References: <5DB475451BAA174CB158B5E897FC1525B1293AB2@MBS07.vivotek.tw>
 <655eb758-c94b-d319-1866-6f1db413d337@linux.intel.com>
In-Reply-To: <655eb758-c94b-d319-1866-6f1db413d337@linux.intel.com>
Accept-Language: zh-TW, en-US
Content-Language: zh-TW
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [192.168.17.134]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10434:6.0.235,18.0.687
 definitions=2020-10-16_02:2020-10-16,2020-10-16 signatures=0
X-Proofpoint-Spam-Reason: safe
Precedence: bulk
List-ID: <linux-i2c.vger.kernel.org>
X-Mailing-List: linux-i2c@vger.kernel.org

SGkgSmFya2tvLA0KDQpPbiAxMC83LzIwIDk6MDggUE0sIGphcmtrby5uaWt1bGFAbGludXguaW50
ZWwuY29tIHdyb3RlOg0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9pMmMvYnVzc2VzL2kyYy1kZXNp
Z253YXJlLXNsYXZlLmMNCj4gYi9kcml2ZXJzL2kyYy9idXNzZXMvaTJjLWRlc2lnbndhcmUtc2xh
dmUuYw0KPiBpbmRleCA0NDk3NGI1M2E2MjYuLjk3MTMxZTg4OGUyNCAxMDA2NDQNCj4gLS0tIGEv
ZHJpdmVycy9pMmMvYnVzc2VzL2kyYy1kZXNpZ253YXJlLXNsYXZlLmMNCj4gKysrIGIvZHJpdmVy
cy9pMmMvYnVzc2VzL2kyYy1kZXNpZ253YXJlLXNsYXZlLmMNCj4gQEAgLTE1OSw3ICsxNTksNiBA
QCBzdGF0aWMgaW50IGkyY19kd19pcnFfaGFuZGxlcl9zbGF2ZShzdHJ1Y3QNCj4gZHdfaTJjX2Rl
diAqZGV2KQ0KPiAgIAl1MzIgcmF3X3N0YXQsIHN0YXQsIGVuYWJsZWQsIHRtcDsNCj4gICAJdTgg
dmFsID0gMCwgc2xhdmVfYWN0aXZpdHk7DQo+IA0KPiAtCXJlZ21hcF9yZWFkKGRldi0+bWFwLCBE
V19JQ19JTlRSX1NUQVQsICZzdGF0KTsNCj4gICAJcmVnbWFwX3JlYWQoZGV2LT5tYXAsIERXX0lD
X0VOQUJMRSwgJmVuYWJsZWQpOw0KPiAgIAlyZWdtYXBfcmVhZChkZXYtPm1hcCwgRFdfSUNfUkFX
X0lOVFJfU1RBVCwgJnJhd19zdGF0KTsNCj4gICAJcmVnbWFwX3JlYWQoZGV2LT5tYXAsIERXX0lD
X1NUQVRVUywgJnRtcCk7DQo+IEBAIC0xNjgsMTMgKzE2NywxMSBAQCBzdGF0aWMgaW50IGkyY19k
d19pcnFfaGFuZGxlcl9zbGF2ZShzdHJ1Y3QNCj4gZHdfaTJjX2RldiAqZGV2KQ0KPiAgIAlpZiAo
IWVuYWJsZWQgfHwgIShyYXdfc3RhdCAmIH5EV19JQ19JTlRSX0FDVElWSVRZKSB8fCAhZGV2LT5z
bGF2ZSkNCj4gICAJCXJldHVybiAwOw0KPiANCj4gKwlzdGF0ID0gaTJjX2R3X3JlYWRfY2xlYXJf
aW50cmJpdHNfc2xhdmUoZGV2KTsNCj4gICAJZGV2X2RiZyhkZXYtPmRldiwNCj4gICAJCSIlI3gg
U1RBVFVTIFNMQVZFX0FDVElWSVRZPSUjeCA6IFJBV19JTlRSX1NUQVQ9JSN4IDoNCj4gSU5UUl9T
VEFUPSUjeFxuIiwNCj4gICAJCWVuYWJsZWQsIHNsYXZlX2FjdGl2aXR5LCByYXdfc3RhdCwgc3Rh
dCk7DQo+IA0KPiAtCWlmICgoc3RhdCAmIERXX0lDX0lOVFJfUlhfRlVMTCkgJiYgKHN0YXQgJiBE
V19JQ19JTlRSX1NUT1BfREVUKSkNCj4gLQkJaTJjX3NsYXZlX2V2ZW50KGRldi0+c2xhdmUsIEky
Q19TTEFWRV9XUklURV9SRVFVRVNURUQsICZ2YWwpOw0KPiAtDQo+ICAgCWlmIChzdGF0ICYgRFdf
SUNfSU5UUl9SRF9SRVEpIHsNCj4gICAJCWlmIChzbGF2ZV9hY3Rpdml0eSkgew0KPiAgIAkJCWlm
IChzdGF0ICYgRFdfSUNfSU5UUl9SWF9GVUxMKSB7DQo+IEBAIC0xODgsMTEgKzE4NSw5IEBAIHN0
YXRpYyBpbnQgaTJjX2R3X2lycV9oYW5kbGVyX3NsYXZlKHN0cnVjdA0KPiBkd19pMmNfZGV2ICpk
ZXYpDQo+ICAgCQkJCQkJIHZhbCk7DQo+ICAgCQkJCX0NCj4gICAJCQkJcmVnbWFwX3JlYWQoZGV2
LT5tYXAsIERXX0lDX0NMUl9SRF9SRVEsICZ0bXApOw0KPiAtCQkJCXN0YXQgPSBpMmNfZHdfcmVh
ZF9jbGVhcl9pbnRyYml0c19zbGF2ZShkZXYpOw0KPiAgIAkJCX0gZWxzZSB7DQo+ICAgCQkJCXJl
Z21hcF9yZWFkKGRldi0+bWFwLCBEV19JQ19DTFJfUkRfUkVRLCAmdG1wKTsNCj4gICAJCQkJcmVn
bWFwX3JlYWQoZGV2LT5tYXAsIERXX0lDX0NMUl9SWF9VTkRFUiwgJnRtcCk7DQo+IC0JCQkJc3Rh
dCA9IGkyY19kd19yZWFkX2NsZWFyX2ludHJiaXRzX3NsYXZlKGRldik7DQo+ICAgCQkJfQ0KPiAg
IAkJCWlmICghaTJjX3NsYXZlX2V2ZW50KGRldi0+c2xhdmUsDQo+ICAgCQkJCQkgICAgIEkyQ19T
TEFWRV9SRUFEX1JFUVVFU1RFRCwNCj4gQEAgLTIwNyw3ICsyMDIsNiBAQCBzdGF0aWMgaW50IGky
Y19kd19pcnFfaGFuZGxlcl9zbGF2ZShzdHJ1Y3QNCj4gZHdfaTJjX2RldiAqZGV2KQ0KPiAgIAkJ
CXJlZ21hcF9yZWFkKGRldi0+bWFwLCBEV19JQ19DTFJfUlhfRE9ORSwgJnRtcCk7DQo+IA0KPiAg
IAkJaTJjX3NsYXZlX2V2ZW50KGRldi0+c2xhdmUsIEkyQ19TTEFWRV9TVE9QLCAmdmFsKTsNCj4g
LQkJc3RhdCA9IGkyY19kd19yZWFkX2NsZWFyX2ludHJiaXRzX3NsYXZlKGRldik7DQo+ICAgCQly
ZXR1cm4gMTsNCj4gICAJfQ0KPiANCj4gQEAgLTIxOSw5ICsyMTMsMTEgQEAgc3RhdGljIGludCBp
MmNfZHdfaXJxX2hhbmRsZXJfc2xhdmUoc3RydWN0DQo+IGR3X2kyY19kZXYgKmRldikNCj4gICAJ
CQlkZXZfdmRiZyhkZXYtPmRldiwgIkJ5dGUgJVggYWNrZWQhIiwgdmFsKTsNCj4gICAJfSBlbHNl
IHsNCj4gICAJCWkyY19zbGF2ZV9ldmVudChkZXYtPnNsYXZlLCBJMkNfU0xBVkVfU1RPUCwgJnZh
bCk7DQo+IC0JCXN0YXQgPSBpMmNfZHdfcmVhZF9jbGVhcl9pbnRyYml0c19zbGF2ZShkZXYpOw0K
PiAgIAl9DQo+IA0KPiArCWlmICgoc3RhdCAmIERXX0lDX0lOVFJfUlhfRlVMTCkgJiYgKHN0YXQg
JiBEV19JQ19JTlRSX1NUT1BfREVUKSkNCj4gKwkJaTJjX3NsYXZlX2V2ZW50KGRldi0+c2xhdmUs
IEkyQ19TTEFWRV9XUklURV9SRVFVRVNURUQsICZ2YWwpOw0KPiArDQo+ICAgCXJldHVybiAxOw0K
PiAgIH0NCj4gDQo+IEBAIC0yMzAsNyArMjI2LDYgQEAgc3RhdGljIGlycXJldHVybl90IGkyY19k
d19pc3Jfc2xhdmUoaW50IHRoaXNfaXJxLA0KPiB2b2lkICpkZXZfaWQpDQo+ICAgCXN0cnVjdCBk
d19pMmNfZGV2ICpkZXYgPSBkZXZfaWQ7DQo+ICAgCWludCByZXQ7DQo+IA0KPiAtCWkyY19kd19y
ZWFkX2NsZWFyX2ludHJiaXRzX3NsYXZlKGRldik7DQo+ICAgCXJldCA9IGkyY19kd19pcnFfaGFu
ZGxlcl9zbGF2ZShkZXYpOw0KPiAgIAlpZiAocmV0ID4gMCkNCj4gICAJCWNvbXBsZXRlKCZkZXYt
PmNtZF9jb21wbGV0ZSk7DQoNCkkgd291bGQgbGlrZSB0byBzdWJtaXQgeW91ciBwYXRjaCBpbiBv
cmRlciB0byBkbyBteSBtb2RpZmljYXRpb24gYmFzZWQgb24gdGhpcyBpZGVhLg0KWW91J3JlIHRo
ZSBhdXRob3IgYnV0IHlvdSBkaWRuJ3QgbGVhdmUgY29tbWl0IGRlc2NyaXB0aW9uLg0KDQpJIHBy
ZXBhcmVkIG9uZSBmb3IgdGhpcyBwYXRjaC4NCg0KICAgIGkyYzogZGVzaWdud2FyZTogY2FsbCBp
MmNfZHdfcmVhZF9jbGVhcl9pbnRyYml0c19zbGF2ZSgpIG9uY2UNCg0KICAgIGkyY19kd19yZWFk
X2NsZWFyX2ludHJiaXRzX3NsYXZlKCkgd2FzIGNhbGxlZCBwZXIgZWFjaCBpbnRlcnJ1cHQgaGFu
ZGxlLg0KICAgIEl0IGNhdXNlZCBzb21lIGludGVycnVwdCBiaXRzIHdoaWNoIGhhdmVuJ3QgYmVl
biBoYW5kbGVkIHlldCB3ZXJlIGNsZWFyZWQsDQogICAgdGhlIGNvcnJlc3BvbmRpbmcgaGFuZGxl
cnMgd291bGQgZG8gbm90aGluZyBkdWUgdG8gaW50ZXJydXB0IGJpdHMgYmVlbg0KICAgIGRpc2Nh
cmRlZC4gRm9yIGV4YW1wbGUsDQoNCiAgICAkIGkyY3NldCAtZiAteSAyIDB4NDIgMHgwMCAweDQx
OyBkbWVzZyAtYw0KICAgIFswXVtjbGVhcl9pbnRyYml0c10weDEgU1RBVFVTIFNMQVZFX0FDVElW
SVRZPTB4MSA6IFJBV19JTlRSX1NUQVQ9MHg1MTQgOiBJTlRSX1NUQVQ9MHg0DQogICAgWzFdW2ly
cV9oYW5kbGVyICAgXTB4MSBTVEFUVVMgU0xBVkVfQUNUSVZJVFk9MHgxIDogUkFXX0lOVFJfU1RB
VD0weDUxNCA6IElOVFJfU1RBVD0weDQNCiAgICBXUklURV9SRUNFSVZFRA0KICAgIFswXVtjbGVh
cl9pbnRyYml0c10weDEgU1RBVFVTIFNMQVZFX0FDVElWSVRZPTB4MCA6IFJBV19JTlRSX1NUQVQ9
MHg3MTQgOiBJTlRSX1NUQVQ9MHgyMDQNCiAgICBbMV1baXJxX2hhbmRsZXIgICBdMHgxIFNUQVRV
UyBTTEFWRV9BQ1RJVklUWT0weDAgOiBSQVdfSU5UUl9TVEFUPTB4NTE0IDogSU5UUl9TVEFUPTB4
NA0KICAgIFdSSVRFX1JFQ0VJVkVEDQoNCiAgICAgIHQxOiBJU1Igd2l0aCB0aGUgMXN0IElDX0lO
VFJfUlhfRlVMTC4NCiAgICAgIHQyOiBDbGVhciBsaXN0ZWQgSUNfSU5UUiBiaXRzIGJ5IGkyY19k
d19yZWFkX2NsZWFyX2ludHJiaXRzX3NsYXZlKCkuDQogICAgICB0MzogRW50ZXIgaTJjX2R3X2ly
cV9oYW5kbGVyX3NsYXZlKCkgYW5kIHRoZW4gZG8NCiAgICAgICAgICBpMmNfc2xhdmVfZXZlbnQo
V1JJVEVfUkVDRUlWRUQpIGJlY2F1c2UNCiAgICAgICAgICBpZiAoc3RhdCAmIERXX0lDX0lOVFJf
UlhfRlVMTCkuDQogICAgICB0NDogSVNSIHdpdGggYm90aCBJQ19JTlRSX1NUT1BfREVUIGFuZCB0
aGUgMm5kIElDX0lOVFJfUlhfRlVMTC4NCiAgICAgIHQ1OiBDbGVhciBsaXN0ZWQgSUNfSU5UUiBi
aXRzIGJ5IGkyY19kd19yZWFkX2NsZWFyX2ludHJiaXRzX3NsYXZlKCkuIFRoZQ0KICAgICAgICAg
IGN1cnJlbnQgSUNfSU5UUl9TVE9QX0RFVCBpcyBjbGVhcmVkIGJ5IHRoaXMNCiAgICAgICAgICBp
MmNfZHdfcmVhZF9jbGVhcl9pbnRyYml0c19zbGF2ZSgpLg0KICAgICAgdDY6IEVudGVyIGkyY19k
d19pcnFfaGFuZGxlcl9zbGF2ZSgpIGFuZCB0aGVuIGRvDQogICAgICAgICAgaTJjX3NsYXZlX2V2
ZW50KFdSSVRFX1JFQ0VJVkVEKSBiZWNhdXNlDQogICAgICAgICAgaWYgKHN0YXQgJiBEV19JQ19J
TlRSX1JYX0ZVTEwpLg0KICAgICAgdDc6IGkyY19zbGF2ZV9ldmVudChTVE9QKSBuZXZlciBiZSBk
b25lIGJlY2F1c2UgSUNfSU5UUl9TVE9QX0RFVCB3YXMNCiAgICAgICAgICBjbGVhcmVkIGluIHQ1
Lg0KDQogICAgVGhlIHJvb3QgY2F1c2UgaXMgdGhhdCBpMmNfZHdfcmVhZF9jbGVhcl9pbnRyYml0
c19zbGF2ZSgpIHdhcyBjYWxsZWQgbWFueQ0KICAgIHRpbWVzLiBDYWxsaW5nIGkyY19kd19yZWFk
X2NsZWFyX2ludHJiaXRzX3NsYXZlKCkgb25jZSBpbiBvbmUgSVNSIGFuZCB0YWtlDQogICAgdGhl
IHJldHVybmVkIHN0YXQgZm9yIGxhdGVyIGhhbmRsaW5nIGlzIHRoZSBzb2x1dGlvbi4NCg0KSSds
bCBzdWJtaXQgaXQgaWYgeW91IGFjY2VwdCBpdCwgb3IgeW91IGhhdmUgb3RoZXIgc3VnZ2VzdGlv
bnMuLi4uPw0KDQotLQ0KTWljaGFlbCBXdQ0K
